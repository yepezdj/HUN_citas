<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- ===== BOX ICONS ===== -->
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <!-- ===== CSS ===== -->
    <link rel="stylesheet" href="/css/styleuser.css">

    <!-- ===== BOOTSTRAP ===== -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
        </script>

    <!-- ===== SWEETALERT2 ===== -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.6/dist/sweetalert2.all.min.js"></script>

    <!-- ===== DATEPICKER ===== -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">


    <title>Usuario</title>
</head>

<body id="body-pd">
    <header class="header" id="header">
        <div class="header__toggle">
            <i class='bx bx-menu' id="header-toggle"></i>
        </div>

        <div class="header__img">
            <img src="/images/HUN.jpg" alt="">
        </div>
    </header>

    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div>
                <a href="https://www.uninorte.edu.co/web/hospital" class="nav__logo">
                    <i class='bx bx-layer nav__logo-icon'></i>
                    <span class="nav__logo-name">
                        Hospital<br>
                        Universidad del<br>
                        Norte
                    </span>
                </a>

                <div class="nav__list">
                    <a href="/consultar" class="nav__link">
                        <i class='bx bx-folder nav__icon'></i>
                        <span class="nav__name">Consultar estado de <br>
                            solicitud</span>
                    </a>
                </div>
            </div>
            <a href="#" onclick="logOut()" class="nav__link">
                <i class='bx bx-log-out nav__icon'></i>
                <span class="nav__name">Cerrar sesión</span>
            </a>
        </nav>
    </div>

    <div class="container-flex">
        <div class="row px-3" style="display: block; min-width: fit-content;" id="MyComponent">
            <div class="col-lg-10 col-xl-9 card flex-row mx-auto px-0">
                <div class="card-body" style="display: block;">
                    <form action="/add" method="POST" enctype="multipart/form-data">
                        <h4 class="title text-center mt-4">
                            Hola <%=user.name%>
                        </h4>
                        <hr class="my-4">
                        <div class="text-center mb-2">
                            A continuación podrás completar toda la información requerida para el agendamiento de la
                            cita
                            médica. <br>
                            Para esto, haz click en cada ventana y completa los 4 pasos.<br>
                            <br>
                            <strong class="font-italic" style="color: red;">RECUERDA QUE DEBES INGRESAR LOS DATOS DEL
                                PACIENTE.</strong>
                        </div>
                        <hr class="my-4">
                        <div class="accordion" id="accordionExample">
                            <div class="card">
                                <div class="card-header" id="headingOne">
                                    <div class="row">
                                        <div class="col">
                                            <div>
                                                <img src="/images/paso1.jpg" style="margin-left: 25px;" width="100px" />
                                            </div>
                                            <div class="col">
                                                <h2 class="mb-0">
                                                    <button class="btn btn-link btn-block text-left" type="button"
                                                        data-toggle="collapse" data-target="#collapseOne"
                                                        aria-expanded="true" aria-controls="collapseOne" id="btnC1">
                                                        INFORMACIÓN DEL PACIENTE
                                                    </button>
                                                </h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="card-body" id="collapse1">
                                            <p class="centered">Completa todos los campos de la información del
                                                paciente. <i class="bi bi-person-lines-fill"></i></p>
                                            <div class="row">
                                                <div class="col-12 col-sm-6" style="display: none;">
                                                    <div class="form-input">
                                                        <label for="actual" class="form-label">Fecha y hora actual<label
                                                                class="redText">*</label></label>
                                                        <input type="text" class="form-control" id="actual"
                                                            name="actual" value="">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="Name" class="form-label">Nombres del paciente <label
                                                                class="redText">*</label></label>
                                                        <input type="text" class="form-control" id="Name" name="Name"
                                                            value="<%= user.name %>">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="Lastname" class="form-label">Apellidos del
                                                            paciente <label class="redText">*</label></label>
                                                        <input type="text" class="form-control" id="Lastname"
                                                            name="Lastname" value="<%= user.last_name %>">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="email" class="form-label">Correo electrónico <label
                                                                class="redText">*</label></label>
                                                        <input type="email" class="form-control" id="email" name="email"
                                                            value="<%= user.email %>">
                                                    </div>
                                                    <div class="alert alert-danger"
                                                        style="margin-top: 5px; display: none;" id="emailNOTOK">
                                                        <small class="form-text" style="margin-left: 20px;">Dirección
                                                            inválida</small>
                                                    </div>
                                                    <div class="alert alert-success"
                                                        style="margin-top: 5px; display: none;" id="emailOK">
                                                        <small class="form-text" style="margin-left: 20px;">Dirección
                                                            válida</small>
                                                    </div>
                                                    <!-- <span id="emailOK"></span> -->
                                                </div>
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="email1" class="form-label">Confirma el correo
                                                            electrónico <label class="redText">*</label></label>
                                                        <input type="email1" class="form-control" id="email1"
                                                            name="email1">
                                                    </div>
                                                    <div class="alert alert-danger"
                                                        style="margin-top: 5px; display: none;" id="emailNOTOK1">
                                                        <small class="form-text" style="margin-left: 20px;">Dirección
                                                            inválida</small>
                                                    </div>
                                                    <div class="alert alert-success"
                                                        style="margin-top: 5px; display: none;" id="emailOK1">
                                                        <small class="form-text" style="margin-left: 20px;">Dirección
                                                            válida</small>
                                                    </div>
                                                    <div class="alert alert-danger"
                                                        style="margin-top: 5px; display: none;" id="emailNOT">
                                                        <small class="form-text" style="margin-left: 20px;">Los correos
                                                            no coinciden</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="number" class="form-label">Número de celular<label
                                                                class="redText">*</label></label>
                                                        <input type="number" class="form-control" id="number"
                                                            name="number" placeholder="Sin puntos ni comas ni guiones"
                                                            min="0" step="1" oninput="validity.valid||(value='');">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="number1" class="form-label">Confirma el número de
                                                            celular <label class="redText">*</label></label>
                                                        <input type="number" class="form-control" id="number1"
                                                            name="number1" placeholder="Sin puntos ni comas ni guiones"
                                                            min="0" step="1" oninput="validity.valid||(value='');">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="Tipo" class="form-label">Tipo de documento<label
                                                                class="redText">*</label></label>
                                                        <select class="custom-select" style="margin-right: 20px;"
                                                            id="Tipo" name="Tipo">
                                                            <option value="0">Seleccionar tipo de documento</option>
                                                            <option value="Cédula de ciudadanía">Cédula de ciudadanía
                                                            </option>
                                                            <option value="Cédula de extranjería">Cédula de extranjería
                                                            </option>
                                                            <option value="NIT">NIT</option>
                                                            <option value="Tarjeta de identitidad">Tarjeta de
                                                                identitidad</option>
                                                            <option value="Pasaporte">Pasaporte</option>
                                                            <option value="Registro civil">Registro civil</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="fechaExp" class="form-label">Fecha de expedición
                                                            <label class="redText">*</label></label>
                                                        <input class="form-control" id="fechaExp" name="fechaExp"
                                                            type="date" autocomplete="off" onkeypress="return false">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6">
                                                    <div class="form-input">
                                                        <label for="Option" style="margin-top: 0px;"
                                                            class="form-label">¿Eres extranjero?<label
                                                                class="redText">*</label></label>
                                                        <select class="custom-select"
                                                            style="margin-right: 10px; margin-top: -10px;" id="Option"
                                                            name="Option" required="true">
                                                            <option value="0">Seleccionar una opción</option>
                                                            <option value="1">Sí</option>
                                                            <option value="2">No</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6" style="display: none;" id="depa">
                                                    <div class="form-input">
                                                        <label for="Departamento" style="margin-top: 0px;"
                                                            class="form-label">Lugar de expedición (Departamento)<label
                                                                class="redText">*</label></label>
                                                        <select class="custom-select"
                                                            style="margin-right: 10px; margin-top: -10px;"
                                                            id="Departamento" name="Departamento"
                                                            onchange="departamento('Departamento','city')">
                                                            <option value="0">Seleccionar departamento de residencia
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6" style="display: none;" id="muni">
                                                    <div class="form-input">
                                                        <label for="city" style="margin-top: 20px;"
                                                            class="form-label">Lugar de expedición (Municipio)<label
                                                                class="redText">*</label></label>
                                                        <select class="custom-select"
                                                            style="margin-right: 10px; margin-top: -10px;" id="city"
                                                            name="city">
                                                            <option value="0">Seleccionar municipio de residencia
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12 col-sm-6" style="margin-top: 20px;">
                                                    <div class="form-input">
                                                        <label for="Cedula" class="form-label">N° de identificación del
                                                            paciente <label class="redText">*</label></label>
                                                        <input type="number" class="form-control" id="Cedula"
                                                            name="Cedula" placeholder="Sin puntos ni comas ni guiones"
                                                            min="0" step="1" oninput="validity.valid||(value='');">
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6" style="margin-top: 20px;">
                                                    <div class="form-input">
                                                        <label for="Cedula1" class="form-label">Confirme N° de
                                                            identificación<label class="redText">*</label></label>
                                                        <input type="number" class="form-control" id="Cedula1"
                                                            name="Cedula1" placeholder="Sin puntos ni comas ni guiones"
                                                            min="0" step="1" oninput="validity.valid||(value='');">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header" id="headingTwo">
                                        <div class="row">
                                            <div class="col">
                                                <div>
                                                    <img src="/images/paso2.jpg" style="margin-left: 25px;"
                                                        width="100px" />
                                                </div>
                                                <div class="col">
                                                    <h2 class="mb-0">
                                                        <button class="btn btn-link btn-block text-left collapsed"
                                                            type="button" data-toggle="collapse"
                                                            data-target="#collapseTwo" aria-expanded="false"
                                                            aria-controls="collapseTwo" id="btnC2">
                                                            INFORMACIÓN DE LA CITA
                                                        </button>
                                                    </h2>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="card-body" id="collapse2" style="display: none;">
                                                <p class="centered">Completa todos los campos de información acerca de
                                                    la
                                                    cita del paciente.
                                                    <i class="bi bi-clipboard-plus"></i>
                                                </p>
                                                <div class="row">
                                                    <div class="col-12 col-sm-6">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="Cita" class="form-label">Tipo de cita <label
                                                                    class="redText">*</label></label>
                                                            <select class="custom-select mt-2" style="margin-top: 20px;"
                                                                id="Cita" name="Cita" onchange="limpiar()">
                                                                <option value="0">Seleccionar tipo de cita médica
                                                                </option>
                                                                <option value="Ayudas diagnósticas">Ayudas diagnósticas
                                                                </option>
                                                                <option value="Procedimiento ambulatorio">Procedimiento
                                                                    ambulatorio
                                                                </option>
                                                                <option value="Consulta medicina general">
                                                                    Consulta medicina general</option>
                                                                <option value="Consulta especializada">Consulta
                                                                    especializada
                                                                </option>
                                                                <option value="Consulta odontología general">Consulta
                                                                    odontología general
                                                                </option>
                                                                <option value="Consulta odontología especializada">
                                                                    Consulta odontología especializada
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="Factura" class="form-label">¿Bajo que afiliacion
                                                                deseas solicitar esta cita?<label
                                                                    class="redText">*</label></label>
                                                            <select class="custom-select mt-2"
                                                                style="margin-right: 20px;" id="Factura" name="Factura"
                                                                onchange="limpiarAfiliacion()">
                                                                <option value="0">Seleccionar afiliación</option>
                                                                <option value="Prepagada">Prepagada</option>
                                                                <option value="EPS">EPS</option>
                                                                <option value="ARL">ARL</option>
                                                                <option value="Particular">Particular</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <!-- </div>
                                                <div class="row" > -->
                                                    <div class="col-12 col-sm-6" id="reg" style="display: none;">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="regimen" class="form-label">Tipo de
                                                                régimen<label class="redText">*</label></label>
                                                            <select class="custom-select mt-2" style="margin-top: 20px;"
                                                                id="regimen" name="regimen">
                                                                <option value="0">Seleccionar tipo de régimen
                                                                </option>
                                                                <option value="Subsidiado">Subsidiado
                                                                </option>
                                                                <option value="Contributivo">Contributivo
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6" id="eps" style="display: none;">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="entidad" class="form-label">Entidad prestadora
                                                                de salud<label class="redText">*</label></label>
                                                            <select class="custom-select mt-2"
                                                                style="margin-right: 20px;" id="entidad" name="entidad">
                                                                <option value="0">Seleccionar EPS</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <!-- </div>
                                                <div class="row"> -->
                                                    <div class="col-12 col-sm-6" id="div" style="display: none;">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="Modo" class="form-label">Modalidad de la cita
                                                                <label class="redText">*</label></label>
                                                            <select class="custom-select mt-2" style="margin-top: 20px;"
                                                                id="Modo" name="Modo">
                                                                <option value="0">Seleccionar modalidad</option>
                                                                <option value="Virtual">Virtual</option>
                                                                <option value="Presencial">Presencial</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6" id="ayudas" style="display: none;">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="Ayudas" class="form-label">Ayudas diagnósticas
                                                                <label class="redText">*</label></label>
                                                            <select class="custom-select mt-2" style="margin-top: 20px;"
                                                                id="Ayudas" name="Ayudas"
                                                                onchange="especialidad('Ayudas','opciones')">
                                                                <option value="0">Seleccionar ayuda diagnóstica</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6" id="procedimiento"
                                                        style="display: none;">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="Procedimientos"
                                                                class="form-label">Procedimientos ambulatorios
                                                                <label class="redText">*</label></label>
                                                            <select class="custom-select mt-2" style="margin-top: 20px;"
                                                                id="Procedimientos" name="Procedimientos"
                                                                onchange="especialidad1('Procedimientos','opciones')">
                                                                <option value="0">Seleccionar procedimiento ambulatorio
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <!-- </div>
                                                <div class="row"> -->

                                                    <div class="col-12 col-sm-6" id="especialidad"
                                                        style="display: none;">
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="Cita" class="form-label">Especialidad <label
                                                                    class="redText">*</label></label>
                                                            <select class="custom-select mt-2" style="margin-top: 20px;"
                                                                id="opciones" name="opciones"
                                                                onchange="doctors('opciones','Doctores')"
                                                                onclick="vacio(), vaciarF()">
                                                                <option value="0">Seleccionar especialidad</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 col-sm-6" id="doctor" style="display: none;">
                                                        <div class="form-input"
                                                            style="margin-top: 20px; margin-bottom: 20px;">
                                                            <label for="Cita" class="form-label">Profesional de la
                                                                salud<label class="redText">*</label></label>
                                                            <select class="custom-select mt-2" style="margin-top: 20px;"
                                                                id="Doctores" name="Doctores"
                                                                onclick="buildTable(), vacioF()" onchange="vaciar()">
                                                                <option value="0">Seleccionar profesional de la salud
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card" style="display: none;" id="card3">
                                        <div class="card-header" id="headingThree">
                                            <div class="row">
                                                <div class="col">
                                                    <div>
                                                        <img src="/images/pasoextra.jpg" style="margin-left: 25px;"
                                                            width="130px" />
                                                    </div>
                                                    <div class="col">
                                                        <h2 class="mb-0">
                                                            <button class="btn btn-link btn-block text-left collapsed"
                                                                type="button" data-toggle="collapse"
                                                                data-target="#collapseThree" aria-expanded="false"
                                                                aria-controls="collapseThree" id="btnC4">
                                                                ENCUESTA DE RIESGO EPIDEMIOLÓGICO
                                                            </button>
                                                        </h2>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="collapse4" style="display: none;">
                                            <div class="card-body">
                                                <div class="text-center mb-2">
                                                    Debido a que haz seleccionado la modalidad de cita presencial, dada
                                                    la emergencia sanitaria
                                                    deberás completar la siguiente encuesta para poder solicitar la
                                                    cita.
                                                </div>
                                                <table id="conTable" class="table table-bordered">
                                                    <tbody>
                                                        <tr>
                                                            <td>
                                                                1. ¿Has tenido fiebre?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options" id="option1"
                                                                            value="Sí" autocomplete="off"> Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options" id="option2"
                                                                            value="No" autocomplete="off" checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                2. ¿Has presentado síntomas respiratorios:
                                                                tos,dificultad
                                                                para respirar, secreción nasal,pérdida del olfato,
                                                                pérdida del
                                                                gusto, cansancio, fatiga y/o dolor de garganta?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options1" id="option3"
                                                                            value="Sí" autocomplete="off"> Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options1" id="option4"
                                                                            value="No" autocomplete="off" checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                3. ¿ Has sido diagnosticado con neumonía recientemente
                                                                (en menos de 20 días)?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options2" id="option5"
                                                                            value="Sí" autocomplete="off"> Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options2" id="option6"
                                                                            value="No" autocomplete="off" checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                4. ¿Alguna de las personas con las que convives ha
                                                                presentado fiebre o los síntomas respiratorios antes
                                                                mencionados?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options3" id="option7"
                                                                            value="Sí" autocomplete="off"> Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options3" id="option8"
                                                                            value="No" autocomplete="off" checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                5. ¿Has viajado fuera del país los últimos 20 días?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options4" id="option9"
                                                                            value="Sí" autocomplete="off"> Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options4"
                                                                            id="option10" value="No" autocomplete="off"
                                                                            checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                6. ¿Eres personal de salud o trabajas en el área de
                                                                la salud y has tenido contacto con pacientes con
                                                                síntomas
                                                                respiratorios?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options5"
                                                                            id="option11" value="Sí" autocomplete="off">
                                                                        Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options5"
                                                                            id="option12" value="No" autocomplete="off"
                                                                            checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                7. ¿Has tenido contacto en los últimos 20 días con
                                                                pacientes a los se les haya diagnosticado coronavirus?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options6"
                                                                            id="option13" value="Sí" autocomplete="off">
                                                                        Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options6"
                                                                            id="option14" value="No" autocomplete="off"
                                                                            checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                8. ¿Has tenido contacto en los último 20 días con
                                                                pacientes hospitalizados por neumonía, o descomposición
                                                                de sus
                                                                enfermedades de base?
                                                            </td>
                                                            <td>
                                                                <div class="btn-group btn-group-toggle toggle"
                                                                    data-toggle="buttons">
                                                                    <label class="btn open-btn">
                                                                        <input type="radio" name="options7"
                                                                            id="option15" value="Sí" autocomplete="off">
                                                                        Sí
                                                                    </label>
                                                                    <label class="btn active">
                                                                        <input type="radio" name="options7"
                                                                            id="option16" value="No" autocomplete="off"
                                                                            checked> No
                                                                    </label>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                9. ANTECEDENTES PATOLÓGICOS NO CONTROLADOS O SIN
                                                                MEDICACIÓN EN EL MOMENTO
                                                                (Diabetes,Hipertesión,Respiratorios, Cardiovasculares,
                                                                obesidad, entre otros)
                                                                <div class="form-input" style="margin-top: 20px;">
                                                                    <label for="encuesta"
                                                                        class="form-label">Cuáles:</label>
                                                                    <textarea class="form-control" id="encuesta"
                                                                        name="encuesta" rows="3"></textarea>
                                                                </div>
                                                            </td>
                                                            <td>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div class="card-header" id="headingThree">
                                            <div class="row">
                                                <div class="col">
                                                    <div>
                                                        <img src="/images/paso3.jpg" style="margin-left: 25px;"
                                                            width="100px" />
                                                    </div>
                                                    <div class="col">
                                                        <h2 class="mb-0">
                                                            <button class="btn btn-link btn-block text-left collapsed"
                                                                type="button" data-toggle="collapse"
                                                                data-target="#collapseThree" aria-expanded="false"
                                                                aria-controls="collapseThree" id="btnC3">
                                                                AGENDAMIENTO
                                                            </button>
                                                        </h2>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="card-body" id="collapse3" style="display: none;">
                                                    <p class="centered">Selecciona el horario de tu cita de acuerdo a la
                                                        disponibilidad del profesional de la salud. <i
                                                            class="bi bi-calendar-event"></i>
                                                    </p>
                                                    <div id="hide">
                                                        <div class="text-center mb-2">
                                                            Horarios habituales del profesional de la salud.
                                                        </div>
                                                        <div class="w-100 d-none d-md-block"></div>
                                                        <div class="col-12 col-sm-12"
                                                            style="height:300px; overflow-y: scroll;">
                                                            <table class="table table-hover" id="tabla">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Profesional de la salud</th>
                                                                        <th>Días disponibles</th>
                                                                        <th>Horarios disponibles</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="myTable">
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="w-100 d-none d-md-block"></div>
                                                        <div class="row">
                                                            <div class="col-12 col-sm-6">
                                                                <div class="form-input" style="margin-top: 20px;">
                                                                    <label for="fecha" class="form-label">Fecha de la
                                                                        cita
                                                                        <label class="redText">*</label></label>
                                                                    <input class="form-control" id="fecha" name="fecha"
                                                                        autocomplete="off" onkeypress="return false">
                                                                </div>
                                                            </div>
                                                            <div class="col-12 col-sm-6" id="hide2">
                                                                <div class="form-input" style="margin-top: 20px;">
                                                                    <label for="Horario" class="custom-label">Horas
                                                                        disponibles
                                                                        <label class="redText">*</label></label>
                                                                    <select class="custom-select" id="Horario"
                                                                        name="Horario">
                                                                        <option value="0">Seleccionar la hora</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header" id="headingFour">
                                                <div class="row">
                                                    <div class="col">
                                                        <div>
                                                            <img src="/images/paso4.jpg" style="margin-left: 25px;"
                                                                width="100px" />
                                                        </div>
                                                        <div class="col">
                                                            <h2 class="mb-0">
                                                                <button
                                                                    class="btn btn-link btn-block text-left collapsed"
                                                                    type="button" data-toggle="collapse"
                                                                    data-target="#collapseThree" aria-expanded="false"
                                                                    aria-controls="collapseThree" id="btnC5">
                                                                    INFORMACIÓN ADICIONAL
                                                                </button>
                                                            </h2>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="collapse5" style="display: none;">
                                                    <div class="card-body">
                                                        <p class="centered">Adjunta los archivos necesarios para la
                                                            cita,
                                                            como la
                                                            orden
                                                            médica ó el número de autorización. <i
                                                                class="bi bi-archive"></i>
                                                        </p>
                                                        <div class="w-100 d-none d-md-block"></div>
                                                        <label for="Orden" class="custom-label">Orden médica (original)
                                                            <i class="bi bi-paperclip"></i></label>
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <input type="file" class="custom-file-input mt-2" id="Orden"
                                                                name="images" accept="application/pdf"
                                                                onchange="ValidateSize(this)" value="">
                                                            <label class="custom-file-label mt-2"
                                                                for="images">Seleccionar
                                                                archivo
                                                                de la
                                                                orden
                                                                médica</label>
                                                        </div>
                                                        <div class="w-100 d-none d-md-block"></div>
                                                        <hr class="my-4">
                                                        <div class="text-center mb-2">
                                                            Ó
                                                        </div>
                                                        <div class="form-input">
                                                            <label for="autorizacion" class="form-label">Digite número
                                                                de autorización <label class="redText">*</label></label>
                                                            <input type="number" class="form-control" id="autorizacion"
                                                                name="autorizacion"
                                                                placeholder="Sin puntos ni comas ni guiones" min="0"
                                                                step="1" oninput="validity.valid||(value='');"
                                                                style="margin-bottom: 50px;">
                                                        </div>
                                                        <div class="w-100 d-none d-md-block"></div>
                                                        <div class="form-input" style="margin-top: 20px;">
                                                            <label for="descripcion" class="form-label">Motivo de la
                                                                consulta y anotaciones</label>
                                                            <textarea class="form-control" id="descripcion"
                                                                name="descripcion" rows="2"></textarea>
                                                        </div>
                                                        <div class="w-100 d-none d-md-block"></div>
                                                        <div class="form-input"
                                                            style="margin-top: 20px; text-align: center;">
                                                            <button type="submit" class="btn btn-primary"
                                                                id="btnAgregar" onclick="validar()">Solicitar
                                                                cita</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.1/umd/popper.min.js"
        integrity="sha512-g2PN+aYR0KupTVwea5Ppqw4bxWLLypWdd+h7E0ydT8zF+/Y2Qpk8Y1SnzVw6ZCVJPrgB/91s3VfhVhP7Y4+ucw=="
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
        integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous">
        </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous">
        </script>
    <script src='https://cdn.jsdelivr.net/npm/moment@2.27.0/min/moment.min.js'></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- ===== DATEPICKER ===== -->
    <script>
        document.onload = loadFunctions();
        function loadFunctions() {

            consultaD();
            consult();
            // dateFormat()
            actual()

        }

        function actual() {
            // var FechaInicio = dateFormat();
            // $('#actual').val(FechaInicio);
        }

        //function dateFormat() {
        var date = new Date();
        var day = date.getDate();
        var month = date.getMonth() + 1;
        var year = date.getFullYear();
        var hour = date.getHours();
        var min = date.getMinutes();
        var sec = date.getSeconds();

        month = (month < 10) ? "0" + month : month;
        day = (day < 10) ? "0" + day : day;
        hour = (hour < 10) ? "0" + hour : hour;
        min = (min < 10) ? "0" + min : min;
        sec = (sec < 10) ? "0" + sec : sec;

        var actualidad = year + '-' + month + '-' + day + ' ' + hour + ':' + min + ':' + sec;
        $('#actual').val(actualidad);
        //}

        var date = new Date();
        var year = date.getFullYear();
        console.log(year)
        if (year == '2021') {
            natDays = [
                [1, 1, 2021],
                [1, 11, 2021],
                [3, 22, 2021],
                [4, 1, 2021],
                [4, 2, 2021],
                [5, 1, 2021],
                [5, 17, 2021],
                [6, 7, 2021],
                [6, 14, 2021],
                [7, 5, 2021],
                [7, 20, 2021],
                [8, 7, 2021],
                [8, 16, 2021],
                [10, 18, 2021],
                [11, 1, 2021],
                [11, 15, 2021],
                [12, 8, 2021],
                [12, 25, 2021]
            ];
        }
        if (year == '2022') {
            natDays = [
                [1, 1, 2022],
                [1, 10, 2022],
                [3, 21, 2022],
                [4, 14, 2022],
                [4, 15, 2022],
                [5, 1, 2022],
                [5, 30, 2022],
                [6, 20, 2022],
                [6, 27, 2022],
                [7, 4, 2022],
                [7, 20, 2022],
                [8, 7, 2022],
                [8, 15, 2022],
                [10, 17, 2022],
                [11, 7, 2022],
                [11, 14, 2022],
                [12, 8, 2022],
                [12, 25, 2022]
            ];
        }
        function nationalDays(date) {
            for (i = 0; i < natDays.length; i++) {
                if (date.getMonth() == natDays[i][0] - 1 &&
                    date.getDate() == natDays[i][1]) {
                    return [false, natDays[i][2] + '_day'];
                }
            }
            var day = date.getDay();
            return [(day != 0)];
        }
        $(function () {
            $("#fecha").datepicker({
                dateFormat: 'mm-dd-yy',
                minDate: new Date(),
                maxDate: '+6m',
                monthNames: ['Enero', 'Febrero', 'Marzo',
                    'Abril', 'Mayo', 'Junio',
                    'Julio', 'Agosto', 'Septiembre',
                    'Octubre', 'Noviembre', 'Diciembre'
                ],
                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun',
                    'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'
                ],
                dayNamesMin: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
                beforeShowDay: nationalDays,
                onSelect: async function (date) {
                    console.log(date)
                    var con1 = document.getElementById('fecha').value;
                    var EspeDoc = document.getElementById('opciones').value;
                    var nameDoc = document.getElementById('Doctores').value;
                    const consulta2 = {
                        con: con1,
                        EspeDoc: EspeDoc,
                        nameDoc: nameDoc,
                        date: date
                    };
                    const options2 = {
                        method: "POST",
                        body: JSON.stringify(consulta2),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    };
                    var response2 = await fetch('/verifyUser', options2);
                    console.log(response2);
                    var hora = await response2.json();
                    console.log(hora);
                    select = document.getElementById('Horario');
                    $("#Horario").empty();
                    for (var i = 0; i < hora.length; i++) {
                        var opt = document.createElement('option');
                        opt.value = hora[i];
                        opt.innerHTML = hora[i];
                        select.add(opt);
                    }
                    $("#Horario").prepend(
                        '<option selected="true" value="0">Seleccionar hora</option>');
                    return false;
                },
            })
        });

        // $(function () {
        //     $("#fechaExp").datepicker({
        //         dateFormat: 'mm-dd-yy',
        //         changeMonth: true,
        //         changeYear: true
        //     })
        // });

        function vaciarF() {
            $('#fecha').val('').datepicker("refresh");
            $("#Horario").empty();
        }
        function vacioF() {
            $('#fecha').val('').datepicker("refresh");
            $("#Horario").empty();
        }
        function limpiar() {
            $("#Procedimientos").empty();
            $("#Procedimientos").prepend('<option selected="true" value="0">Seleccionar procedimiento ambulatorio</option>');
            $("#Ayudas").empty();
            $("#Ayudas").prepend('<option selected="true" value="0">Seleccionar ayuda diagnóstica</option>');
            $("#opciones").empty();
            $("#opciones").prepend('<option selected="true" value="0">Seleccionar especialidad</option>');
            $("#Doctores").empty();
            $("#Doctores").prepend('<option selected="true" value="0">Seleccionar profesional de la salud</option>');
        }

        function limpiarAfiliacion() {
            $("#Procedimientos").empty();
            $("#Procedimientos").prepend('<option selected="true" value="0">Seleccionar procedimiento ambulatorio</option>');
            $("#entidad").empty();
            $("#entidad").prepend('<option selected="true" value="0">Seleccionar EPS</option>');
        }

        function encuesta() {
            var cita = document.getElementsById('Cita');
            var modo = document.getElementsById('Modo');
        }
        $(document).ready(function () {
            $('#Cita').on('change', function () {
                if (this.value == 'Ayudas diagnósticas') {
                    Swal.fire({
                        icon: 'info',
                        text: 'Debido a que requieres de ayudas diagnósticas, dada la emergencia sanitaria deberás completar la siguiente encuesta para poder solicitar la cita.'
                    })
                    $("#card3").show();
                } else if (this.value == 'Procedimiento ambulatorio') {
                    Swal.fire({
                        icon: 'info',
                        text: 'Debido a que requieres de procedimiento ambulatorio, dada la emergencia sanitaria deberás completar la siguiente encuesta para poder solicitar la cita.'
                    })
                    $("#card3").show()
                } else if (this.value == 'Consulta odontología general') {
                    Swal.fire({
                        icon: 'info',
                        text: 'Debido a que requieres consulta odontológica general, dada la emergencia sanitaria deberás completar la siguiente encuesta para poder solicitar la cita.'
                    })
                    $("#card3").show()
                } else if (this.value == 'Consulta odontología especializada') {
                    Swal.fire({
                        icon: 'info',
                        text: 'Debido a que requieres consulta odontológica especializada, dada la emergencia sanitaria deberás completar la siguiente encuesta para poder solicitar la cita.'
                    })
                    $("#card3").show()
                } else {
                    $("#card3").hide()
                }
            });
        });

        $(document).ready(function () {
            $('#Option').on('change', function () {
                if (this.value == '2') {
                    $("#depa").show();
                    $("#muni").show();
                } else {
                    $("#depa").hide();
                    $("#muni").hide()
                }
            });
        });

        $(document).ready(function () {
            $('#Modo').on('change', function () {
                if (this.value == 'Presencial') {
                    Swal.fire({
                        icon: 'info',
                        text: 'Debido a que has seleccionado la modalidad de cita presencial, dada la emergencia sanitaria deberás completar la siguiente encuesta para poder solicitar la cita.'
                    })
                    $("#card3").show();
                } else {
                    $("#card3").hide()
                }
            });
        });

        $(document).ready(function () {
            $('#Cita').on('change', function () {
                if (this.value == 'Consulta medicina general') {
                    $("#div").show();
                } else if (this.value == 'Consulta especializada') {
                    $("#div").show();
                } else {
                    $("#div").hide()
                }
            });
        });

        $(document).ready(function () {
            $('#Factura').on('change', function () {
                if (this.value == 'EPS') {
                    eps();
                    $("#eps").show();
                    $("#reg").show();
                } else if (this.value == 'Prepagada') {
                    epsPrepagada();
                    $("#eps").show();
                    $("#reg").hide();
                } else if (this.value == 'ARL') {
                    eps();
                    $("#eps").show();
                    $("#reg").hide();
                } else {
                    $("#eps").hide();
                    $("#reg").hide()
                }
            });
        });

        $(document).ready(function () {
            $('#Cita').on('change', function () {
                if (this.value == 'Consulta especializada') {
                    consulta();
                    $("#especialidad").show();
                    $("#doctor").show();
                    $("#ayudas").hide();
                    $("#procedimiento").hide();
                } else if (this.value == 'Ayudas diagnósticas') {
                    ayuda();
                    $("#ayudas").show();
                    $("#especialidad").show();
                    $("#doctor").show();
                    $("#procedimiento").hide();
                } else if (this.value == 'Procedimiento ambulatorio') {
                    procedimiento();
                    $("#procedimiento").show();
                    $("#especialidad").show();
                    $("#doctor").show();
                    $("#ayudas").hide();
                } else {
                    $("#procedimiento").hide();
                    $("#ayudas").hide();
                    $("#especialidad").hide();
                    $("#doctor").hide()
                }
            });
        });

        $('#btnC1').click(function () {
            $('#collapse1').toggle();
        });
        $('#btnC2').click(function () {
            $('#collapse2').toggle();
        });
        $('#btnC3').click(function () {
            $('#collapse3').toggle();
        });
        $('#btnC4').click(function () {
            $('#collapse4').toggle();
        });
        $('#btnC5').click(function () {
            $('#collapse5').toggle();
        });

        document.getElementById('email').addEventListener('input', function () {
            campo = event.target;
            valido = document.getElementById('emailOK');

            emailRegex = /^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;
            if (emailRegex.test(campo.value)) {
                $("#emailOK").show();
                $("#emailNOTOK").hide();
                $("#emailOK").hide();
                // valido.innerText = "válido";               
            } else {
                $("#emailNOTOK").show();
                $("#emailOK").hide();
                // valido.innerText = "incorrecto";
                // Swal.fire({
                //     icon: 'error',
                //     title: 'Oops...',
                //     text: 'Debe escribir una dirección válida'
                // })
            }
        });
        document.getElementById('email1').addEventListener('input', function () {
            campo = event.target;
            valido = document.getElementById('emailOK1');
            // var email = document.getElementsById('email');

            emailRegex = /^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;
            if (emailRegex.test(campo.value)) {
                $("#emailOK1").show();
                $("#emailNOTOK1").hide();
                $("#emailOK1").hide();
                // valido.innerText = "válido";               
            } else {
                $("#emailNOTOK1").show();
                $("#emailOK1").hide();
            }

            // if(campo.value !== email.value){
            //     $("#emailNOT").show();
            // }else{
            //     $("#emailNOT").hide();
            // }
        });

        function validar() {
            //Se extre el formulario donde se encuentran contenidos los campos a través de su id
            var name = document.getElementById("Name").value;
            var lastname = document.getElementById("Lastname").value;
            var email = document.getElementById("email").value;
            var email1 = document.getElementById("email1").value;
            var number = document.getElementById("number").value;
            var number1 = document.getElementById("number1").value;
            var Tipo = document.getElementById("Tipo").value;
            var ncedula = document.getElementById("Cedula").value;
            var ncedula1 = document.getElementById("Cedula1").value;
            var cita = document.getElementById("Cita").value;
            var factura = document.getElementById("Factura").value;
            var ayuda = document.getElementById("Ayudas").value;
            var modo = document.getElementById("Modo").value;
            var selectes = document.getElementById("opciones").value; //Se extrea cada elemento
            var selectdr = document.getElementById("Doctores").value;
            var regi = document.getElementById("regimen").value;
            var entidad = document.getElementById("entidad").value;
            var fecha = document.getElementById("fecha").value;
            var hora = document.getElementById("Horario").value;
            var fileo = document.getElementById("Orden").value;
            var autorizacion = document.getElementById("autorizacion").value;

            console.log(fileo)
            console.log(autorizacion)
            console.log(typeof fileo)
            console.log(typeof autorizacion)

            if (name == "") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes escribir los nombres'
                })
                event.preventDefault();
                return false;
            }
            if (lastname == "") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes escribir los apellidos'
                })
                event.preventDefault();
                return false;
            }
            if (email1 !== email) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Los correos no coinciden'
                })
                event.preventDefault();
                return false;
            }
            if (number.length == "0") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes digitar el número de celular'
                })
                event.preventDefault();
                return false;
            }
            if (number.length < "10") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Número de celular inválido'
                })
                event.preventDefault();
                return false;
            }
            if (number1 !== number) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Los números de celular ingresados no coinciden'
                })
                event.preventDefault();
                return false;
            }
            if (Tipo == "0") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar el tipo de documento'
                })
                event.preventDefault();
                return false;
            }
            if (ncedula.length == "0") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes ingresar el número de identificación'
                })
                event.preventDefault();
                return false;
            }
            if (ncedula.length < "5") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'El número de identificación debe tener por lo menos 5 dígitos'
                })
                event.preventDefault();
                return false;
            }
            if (ncedula1 !== ncedula) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'El número de identificación no coincide'
                })
                event.preventDefault();
                return false;
            }
            if (cita == "0") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar el tipo de cita médica'
                })
                event.preventDefault();
                return false;
            }
            if (factura == "0") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar el tipo de afiliación'
                })
                event.preventDefault();
                return false;
            }
            if (factura == "EPS" & regi == '0') {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar el régimen de la EPS'
                })
                event.preventDefault();
                return false;
            }
            if (factura == "EPS" & entidad == '0') {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar la EPS'
                })
                event.preventDefault();
                return false;
            }
            if (modo == "0" & cita == "Consulta especializada") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar una modalidad'
                })
                event.preventDefault();
                return false;
            }
            if (modo == "0" & cita == "Consulta medicina general") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar una modalidad'
                })
                event.preventDefault();
                return false;
            }
            if (cita == "Ayudas diagnósticas" & ayuda == '0') {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar la ayuda diagnóstica'
                })
                event.preventDefault();
                return false;
            }
            if (selectes == "0" & cita == 'Consulta especializada') {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar una especialidad'
                })
                event.preventDefault();
                return false;
            }
            if (selectdr == "0" & cita == 'Consulta especializada') {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar un médico'
                })
                event.preventDefault();
                return false;
            }
            if (fecha == "") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar una fecha'
                })
                event.preventDefault();
                return false;
            }
            if (hora == "0") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes seleccionar una hora'
                })
                event.preventDefault();
                return false;
            }
            if (fileo == '' & autorizacion.length == "0") {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Debes adjuntar archivo de orden médica o digitar número de autorización'
                })
                event.preventDefault();
                return false;
            }
            else {
                Swal.fire({
                    icon: 'success',
                    title: '¡Buen trabajo!',
                    text: '¡Se han enviado correctamente los datos!'
                })
            }
        }
        function ValidateSize(file) {
            var FileSize = file.files[0].size / 1024 / 1024;
            var fileo = document.getElementById("Orden");
            if (FileSize > 3) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'El archivo supera los 3 MB'
                })
                fileo.value = "";
                event.preventDefault();
                return false;
            }
        }

        var result = [];
        var result3 = [];
        async function consult() {
            var con1 = document.getElementById('Doctores').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/datos', options2);
            console.log(response2)
            result = await response2.json();
            console.log(result)
            buildTable()
        }
        function buildTable() {
            vaciar();
            vacio();
            console.log(result)
            var table = document.getElementById('myTable');
            select = document.getElementById('Doctores');
            for (var i = 0; i < result.length; i++) {
                if (select.value == result[i].Doctor) {
                    var row = `<tr>
                            <td>                              
                                ${result[i].Doctor}                                
                            </td> 
                            <td>                              
                                ${result[i].dia}                                
                            </td> 							
							<td>                              
                                ${result[i].hora_ini} - ${result[i].hora_fin}                                
                            </td>                                                          
					  </tr>`
                    table.innerHTML += row
                }
            }
        }
        function vaciarU() {
            document.getElementById('TableUser').innerHTML = '';
        }
        function vacioU() {
            document.getElementById('TableUser').innerHTML = '';
        }
        function vaciar() {
            document.getElementById('myTable').innerHTML = '';
        }
        function vacio() {
            document.getElementById('myTable').innerHTML = '';
        }
        //Se crea una función para que el nombre de los documentos cargados 
        //en los inputs de tipo file se muestren en la página, a través de si id
        $(document).ready(function () {
            $("#Orden").on('change', function () {
                var fileName = $(this).val().split("\\").pop();
                $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
            });
            $("#Imagen").on('change', function () {
                var fileName = $(this).val().split("\\").pop();
                $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
            });
        });
        async function doctors(s1, s2) {
            var con1 = document.getElementById('opciones').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/doctor', options2);
            result5 = await response2.json();
            var s1 = document.getElementById(s1);
            var s2 = document.getElementById(s2);
            s2.innerHTML = "";
            select = document.getElementById('Doctores');
            for (var i = 0; i < result5.length; i++) {
                if (s1.value == result5[i].Especialidad) {
                    var opt = document.createElement('option');
                    opt.value = result5[i].Nombres;
                    opt.innerHTML = result5[i].Nombres;
                    select.add(opt);
                }
            }
            $("#Doctores").prepend('<option selected="true" value="0">Seleccionar profesional de la salud</option>');
        }
        var result4 = [];
        async function consulta() {
            var con1 = document.getElementById('opciones').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/agenda', options2);
            result4 = await response2.json();
            select = document.getElementById('opciones');
            for (var i = 0; i < result4.length; i++) {
                var opt = document.createElement('option');
                opt.value = result4[i].Especialidad;
                opt.innerHTML = result4[i].Especialidad;
                select.add(opt);
            }
        }

        async function ayuda() {
            var con1 = document.getElementById('Ayudas').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/ayuda', options2);
            result4 = await response2.json();
            select = document.getElementById('Ayudas');
            for (var i = 0; i < result4.length; i++) {
                var opt = document.createElement('option');
                opt.value = result4[i].Ayudas;
                opt.innerHTML = result4[i].Ayudas;
                select.add(opt);
            }

        }

        async function procedimiento() {
            var con1 = document.getElementById('Procedimientos').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/procedimiento', options2);
            result4 = await response2.json();
            console.log(result4)
            select = document.getElementById('Procedimientos');
            for (var i = 0; i < result4.length; i++) {
                var opt = document.createElement('option');
                opt.value = result4[i].Procedimientos;
                opt.innerHTML = result4[i].Procedimientos;
                select.add(opt);
            }

        }

        async function especialidad(s1, s2) {
            var con1 = document.getElementById('opciones').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/ayuda', options2);
            result5 = await response2.json();
            var s1 = document.getElementById(s1);
            var s2 = document.getElementById(s2);
            s2.innerHTML = "";
            select = document.getElementById('opciones');
            for (var i = 0; i < result5.length; i++) {
                if (s1.value == result5[i].Ayudas) {
                    var opt = document.createElement('option');
                    opt.value = result5[i].Especialidad;
                    opt.innerHTML = result5[i].Especialidad;
                    select.add(opt);
                }
            }
            $("#opciones").prepend('<option selected="true" value="0">Seleccionar especialidad</option>');
        }

        async function especialidad1(s1, s2) {
            var con1 = document.getElementById('opciones').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/procedimiento', options2);
            result5 = await response2.json();
            var s1 = document.getElementById(s1);
            var s2 = document.getElementById(s2);
            s2.innerHTML = "";
            select = document.getElementById('opciones');
            for (var i = 0; i < result5.length; i++) {
                if (s1.value == result5[i].Procedimientos) {
                    var opt = document.createElement('option');
                    opt.value = result5[i].Especialidad;
                    opt.innerHTML = result5[i].Especialidad;
                    select.add(opt);
                }
            }
            $("#opciones").prepend('<option selected="true" value="0">Seleccionar especialidad</option>');
        }

        async function eps() {
            var con1 = document.getElementById('entidad').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/listaEPS', options2);
            result4 = await response2.json();
            select = document.getElementById('entidad');
            for (var i = 0; i < result4.length; i++) {
                var opt = document.createElement('option');
                opt.value = result4[i].eps;
                opt.innerHTML = result4[i].eps;
                select.add(opt);
            }
        }

        async function epsPrepagada() {
            var con1 = document.getElementById('entidad').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/listaEPS', options2);
            result4 = await response2.json();
            select = document.getElementById('entidad');
            for (var i = 0; i < result4.length; i++) {
                if (result4[i].Prepagada == 'Si') {
                    var opt = document.createElement('option');
                    opt.value = result4[i].eps;
                    opt.innerHTML = result4[i].eps;
                    select.add(opt);
                }
            }
        }

        async function departamento(s1, s2) {
            var con1 = document.getElementById('Departamento').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/municipio', options2);
            result5 = await response2.json();
            var s1 = document.getElementById(s1);
            var s2 = document.getElementById(s2);
            s2.innerHTML = "";
            select = document.getElementById('city');
            for (var i = 0; i < result5.length; i++) {
                if (s1.value == result5[i].Departamento) {
                    var opt = document.createElement('option');
                    opt.value = result5[i].Municipio;
                    opt.innerHTML = result5[i].Municipio;
                    select.add(opt);
                }
            }
            $("#city").prepend('<option selected="true" value="0">Seleccionar municipio de residencia</option>');
        }
        var result4 = [];
        async function consultaD() {
            var con1 = document.getElementById('Departamento').value;
            const consulta2 = {
                con: con1
            };
            const options2 = {
                method: "POST",
                body: JSON.stringify(consulta2),
                headers: {
                    "Content-Type": "application/json"
                }
            };
            const response2 = await fetch('/departamentos', options2);
            result4 = await response2.json();
            select = document.getElementById('Departamento');
            for (var i = 0; i < result4.length; i++) {
                var opt = document.createElement('option');
                opt.value = result4[i].Departamento;
                opt.innerHTML = result4[i].Departamento;
                select.add(opt);
            }
        }


    </script>
    <!--===== MAIN JS =====-->
    <script src="/js/main.js"></script>
</body>

</html>